# SW 개발 계획서
* 전력산업에 ICT신기술을 적용한 새로운 사업 모델을 제시하고 이에 따른 정보보안 이슈와 해결 방안을 제시할 것

## 🚩 SW 명

Enhanced Open MG: 한전 오픈 마이크로그리드 개선안

<!--
## Features
#### 개인정보보호 달성
* 거래 익명화(Confidential Transaction): 판매자와 소비자 양 측의 개인정보보호 강화
* PPDL(Privacy-Preserving-Deep-Learning): 지능화된 전력망(스마트 그리드) 운용을 위해 필연적인 데이터 수집을 방지하면서도 정확한 에측을 가능하게 함
#### 온전한 탈중앙화(Decentralization)
* PPDL을 통한 Server-less와 P2P 거래로 온전한 탈중앙화를 이룩; 에너지플랫폼 공급자로 도약
#### P2P 거래 강화
* Uniswap을 이용한 P2P 거래 조율: 사재기 방지, 시장 급변 방지
#### 실시간 데이터 분석 및 전달
* Plasma solution: 빠른 Tps(Transaction-per-seconds)를 가진 PoA(Proof-of-Authority) Blockchain을 운용해 실시간 데이터 분석 및 전달 달성; Plasma  통해 Public Blockchain에 결과를 등록함으로써 무결성 훼손 방지
* PPDL을 위한 별도의 Blockchain과 relay를 통해 소통 가능
#### 능동적 서비스로의 전환
* PPDL-chain API: 학습된 모델을 이용한 PPDL-chain 독립적 예측 서비스 제공; (한전 빅데이터 융합센터 등) 분석 데이터만 제공하던 수동적 서비스에서 API를 통한 실시간 예측 정보를 얻을 수 있는 능동적 서비스로의 전환
* (웹사이트, 애플리케이션 등을 통한) 자신의 에너지 소비에 대한 즉각적인 피드백과 전력을 관리할 수 있음
-->

## 🚩 제안 개요
* 제안 SW의 전체적인 내용을 쉽게 이해할 수 있도록 작성할 것 (A4 1 페이지 이내)

스마트 그리드는 전력망에 정보통신기술을 적용하여 전기의 공급자와 사용자가 실시간으로 정보를 교환하는 등의 방법을 통하여 전기를 공급함으로써 에너지 이용효율을 극대화하는 전력망이다[1][2]. 스마트 그리드에서 전력망은 단순히 전력을 공급하는 역할을 넘어 전력 중개(Aggregator), 개인 간 거래(P2P) 등 분산자원을 거래하는 플랫폼으로서 기능한다. 이러한 온라인 전력 거래에 ICT 신기술인 블록체인을 접목하는 시도가 이어지고 있다.

그러나 기존의 블록체인 솔루션에서는 거래에 참여한 공급자와 소비자의 정보(공개키), 거래 내역 및 잔고가 공개되어 누구나 열람할 수 있어 개인정보 유출 문제가 야기된다. 또한 실제 전기를 공급/소비하는 공급자/소비자가 아니라 시장에서의 차익만을 노리는 거래자(trader)가 등장해 시세를 교란할 수 있다.

![service](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/service.png)

제안하는 'Enhanced Open MG'에서는 익명화 기술인 영지식증명(zero-knowledge proof) 기술에 기반한 토큰(token) zk-ERC20을 제시하고, 거래를 완전히 익명화해 개인정보를 보호하면서도 블록체인상에서 거래가 성사될 수 있도록 했다[5][6]. 또한 거래량에 따라 자동으로 가격이 책정되는(APR) 유니스왑(uniswap) 프로토콜을 사용해 시장 교란 행위를 방지하고 높은 유동성을 확보했다[7].

한편 수요 예측 등 스마트 그리드의 지능형 기능 운용에는 데이터 수집이 필수적이다. 이를 위해 참여자 간에 데이터를 공개하지 않으면서도 공동의 모델을 학습시킬 수 있는 탈중앙화된 모델 학습 방식(PPDL, Privacy-Preserving Deep Learning)을 구현했다[8]. 이로부터 데이터 프라이버시 문제를 해결하는 동시에 실시간 수요 예측이을 가능하게 한다. 나아가 단순히 데이터 열람만 가능한 현재의 수동적인 형태에서, 서비스로서의 추론 기능(Inference-as-a-service)을 제공함으로써 능동적인 가치 창출을 가능하게 한다. 이로부터 전력산업에서 신시장을 창출하고 경제의 혁신성장에 기여하고자 한다.

## 🚩 배경 및 필요성
* 제안 이유 및 필요성 등 제안 배경을 잘 이해할 수 있도록 작성할 것 (A4 2 페이지 이내)

2011년 폭염, 전기 생산량이 소비량을 감당하지 못해 한국전력공사의 광역 감시 제어 시스템 WAMAC이 전국적 순환 정전을 실시했다. 이로써 무작위 정전 사태인 블랙아웃을 방지하고자 했으나 여러 불편이 야기됐다. 전력 공급 우선순위가 낮았던 소규모 병원에서는 수술이 중단되는 일도 있었다[9]. 만일 당시에 스마트 그리드 기술이 적용되었더라면 혼란을 줄일 수 있었을 것이다.

지금까지의 전력망은 발전소와 소비자를 연결하는 것에 중점을 두었다면, 스마트 그리드는 기존 전력망에 양방향 정보교환을 더해 데이터 활용을 가능하게 한다. 가령 급격한 전기 소비 증가에 대비하기 위해 실제 생산하는 전기량을 항상 소비량보다 많게 유지하고자 하는데, 이러한 '전력 공급 예비율'이 너무 높으면 에너지가 낭비된다. 스마트 그리드에서는 데이터에 기반한 효율적ᆞ안정적인 전력 공급 및 수요 조절이 가능하다. 대표적인 사례로 미국에서는 2003년 'Grid 2030' 정책을 펼쳐 최초로 스마트 그리드 실증 사업을 추진, 2012년 3월까지 29억 달러를 투자해 68억 달러 규모의 산출물을 얻었으며, 에너지의 효율적인 관리뿐만 아니라 다양한 분야의 일자리가 창출되는 효과를 입증했다[10].

이렇듯 전력 시장은 변화하고 있다. 기존 공급자와 소비자로 이원화된 시장 주체의 경계는 희석되어 프로슈머와 같은 참여자가 등장했고, 전력 거래는 단순 시장을 넘어 중개 거래, P2P 거래를 포괄한다. 이로써 시장 구조는 소수 공급자가 전기를 파는 수직적ᆞ폐쇄적 구조에서 다수가 전기를 사고파는 수평적ᆞ개방적 구조로 변화한다[11]. 이에 자연스럽게 블록체인 기술을 접목할 수 있다. 국내외 여러 사례가 있는데, 영국의 스타트업 'Verv'는 런던 북동부 지역인 해크니 주택단지에 시범적으로 블록체인을 통한 P2P 전력거래 시스템을 도입한 바 있다. 미국의 스타트업 'LO3'는 뉴욕 브루클린 지역을 대상으로 잉여전력 거래 시스템을 구축하였고, 호주의 'Power Ledger'는 호주 정부와 협력하여 스마트 그리드 구축을 진행했다. 또한 오스트리아의 'Grid Singularity'는 블록체인을 통해 에너지 수요 관리 및 데이터 거래를 할 수 있게 했다. 국내에서는 한국전력공사가 블록체인 기반의 개방형 에너지 커뮤니티 'KEPCO Open MG' 프로젝트를 추진 중이다[3][4].

블록체인 기반 플랫폼에서 프로슈머 개개인은 중앙화된 기관, 가령 전력회사를 거치지 않고도 신뢰가 부여된 환경상에서 에너지를 거래할 수 있다. 거래 과정의 단축과 비용을 획기적으로 낮춰 전력 거래 시장의 효율을 높일 수도 있다. 그러나 블록체인 솔루션을 채택함으로 인해 개인정보 유출 및 데이터 프라이버시, 시장 교란 행위 등이 새로운 문제점으로 부상한다.

### 블록체인 기반 플랫폼의 한계

#### 개인정보 유출

블록체인에서는 모든 거래 내역이 원장에 공개되므로 개인정보 유출 문제가 발생한다. 가령 '공동주택 내 홈 간 전력거래'가 블록체인상에서 이뤄진다면, 이웃 중 누구나 나의 공개키를 추적하는 것으로 에너지 거래 장부, 에너지 사용 정보를 알아낼 수 있다[12]. 스마트 전력 계량기(AMI)가 도입되면 문제는 더욱 심화된다. 초단위의 에너지 사용량은 주거자 수, 생활 패턴 등을 역추산할 수 있는 근거가 된다. 이는 관리자가 존재하는 프라이빗(private) 블록체인에서 검증 권한에 차등을 두는 방식으로 대응할 수 있으나, 이는 근본적인 문제 해결이 아니라 또 다른 중앙화 문제를 야기하는 자충수이다. 따라서 플랫폼 활성화를 위해 거래 내역을 완전히 익명화하면서도 검증할 수 있는 기술이 요구된다.

#### 데이터 프라이버시

전력 소비자의 데이터는 '전력 사용량 예측' 등의 응용에 필요한 데이터이다. 또한 앞으로 다양한 전력 관련 산업이 창출되어 스마트 그리드 블록체인에 참여하는 전력 공급자, 프로슈머 수가 증가함에 따라 이들이 제공하는 데이터는 '전기 요금 예측', '전력 공급망의 효율적인 배치' 등에 요구된다. 그러나 이러한 데이터 역시 민감한 개인정보이므로 활용한 서비스 제공에 프라이버시 문제가 발생한다. 이를 해결하려면 업체 간 프라이버시를 보장하면서 높은 정확도의 추론 서비스(Inference-as-a-Service)를 제공할 수 있는 기술적 대안이 필요하다.

#### 시장 교란 행위

종래의 P2P 거래는 희망 가격이 일치하는 판매자와 구매자가 매칭된 후 상호 거래가 이루어진다. 이는 시장 참여자가 많고 높은 거래량이 보장될 때 올바르게 작동한다. 그러나 시장에 충분한 유동성이 공급되지 않는 경우, 소수의 거래자들이 시장을 교란할 수 있다. 실제 에너지 공급자ᆞ소비자가 아닌 차익만을 노리는 거래자로부터 생태계가 위협받을 수 있다. 따라서 시장 교란 행위를 방지하는 방안이 필요하다.

이러한 블록체인 기반 플랫폼의 한계를 해결하기 위해 우리는 새로운 시스템의 필요성을 주장한다. 나아가 거래의 익명화를 통해 더 많은 소비자를 시스템에 유치하고, 소비자와 공급자가 생산하는 데이터의 프라이버시를 보장하면서도 높은 정확도의 추론 서비스를 제공하며, 시장 교란 행위에 내구성이 있는 시스템을 제안한다. 본 시스템으로 하여금 비로소 블록체인 기술이 성공적으로 에너지 플랫폼에 결합될 것이다.

## 🚩 제안 SW
* 제안 SW의 구체적인 내용을 자유롭게 기술하되, 활용대상 데이터, 데이터 확보방안, 분석․활용 아이디어에 대해 세부적이고 구체적으로 기술할 것
* 활용 대상이 되는 데이터 항목 등에 대해 상세히 기술할 것
* 활용 대상 데이터는 제한이 없으나 확보 가능한 데이터이어야 함
* 데이터 분석을 통해 얻을 수 있는 결과와 이를 활용한 아이디어에 대해 상세히 기술할 것

<!--
- (전력 데이터, 날씨 정보 등 예측에 쓰이는 데이터)
- 수요 예측, 가격 예측, 전력 공급망 효율 등
-->

#### 전력거래소 공개 데이터
전력시장 정보 (https://www.kpx.or.kr/www/selectBbsNttList.do?key=19&bbsNo=133)
  - 기준용량가격, 지역 및 시간대별 용량가격계수
  - 기간: 2015년부터 2019까지

전력계통 운영정보 (https://www.kpx.or.kr/www/selectPoiGgtsList.do?key=20&gonggaeTypeSeq=3)
  - 5분 단위 전력 수요 예측 데이터
  - 기간: 2015년 8월부터 2019년 7월까지
  
#### KT giga energy trade 공개 데이터
공개 API (가이드: https://apilink.kt.co.kr/apiInfo/mvInfoView.do?apiSpcNo=489&apiNo=6738)

피크전력 데이터
  - 15분 단위 과거 피크전력 및 예측 피크전력 데이터
  - 과거: https://apilink.kt.co.kr/base/getPeakElectricMn15
  - 예측: https://apilink.kt.co.kr/base/getExpectPeakElectricMn15


### 시스템 구조도
![overview](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/overview.png)

### Plasma Chain
![plasma](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/plasma.png)

### Privacy Preserving Deep Learning
![ppdl](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/ppdl.png)

### Relay
![detail](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/detail.png)

### Uniswap

#### Eth to Token
<!--주로 생산자와 소비자 간의 거래-->
![e2t](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/uniswap_e2t.png)

#### Token to Token
<!--지역별(마이크로 그리드) 잉여 전력 거래 가능-->
![t2t](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/uniswap_t2t.png)

<!--
### 시뮬레이션
-->

<!--
이처럼 블록체인 상에서의 P2P 전력 거래 시스템이 많지만 다들 유저의 프라이버시 문제는 고려하지 않고 있다. 현재 시스템은 누가 누구에게 얼만큼의 전력을 얼마에 팔았는지 모두 드러나게 되어 프라이버시가 보호되지 않는다. 이에 우리는 전력 수요를 예측하는 머신러닝 모델을 학습 시킬 때도 유저들의 개인 정보가 드러나지 않는 Privacy Preserving Deep Learning [3] 방식을 도입하였으며, 블록 체인 상에서 유저간 거래 정보를 보호하기 위해 자세한 정보는 보이지 않으면서도 거래의 유효성은 검증할 수 있게 해주는 Zero Knowledge Proof [2] 기술을 활용하고자 한다.
-->

## 🚩 예상 결과 (서비스)
* 제안 SW개발을 실행하여 얻을 수 있는 예상 결과물 (서비스 등)에 대해 구체적으로 기술할 것 (A4 2 페이지 이내)

본 제안 SW는 거래를 익명화할 수 있고, 데이터 프라이버시를 보장하면서도 추론 서비스를 제공할 수 있고, 시장 교란 행위에 내구성이 있다. 이러한 에너지 거래 플랫폼은 다음과 같은 서비스들을 제공한다.

![SGaaS](https://github.com/twodude/Energy-X-Security-Hackathon/blob/master/images/SGaaS.png)

#### 실시간 전력망 통합관제 시스템

데이터에 기반한 예측을 토대로 에너지의 실시간 감시, 제공, 제어하는 통합관제 시스템을 구축한다. 이는 특히 신재생 에너지에 높은 효용을 보인다. 현재 1MW 이하 소규모 신재생 발전소는 월 1회 누적 발전량을 계량하는 반면, 본 시스템은 데이터를 실시간으로 누적하고 활용할 수 있도록 제공한다[11]. 에너지 공급자와 소비자들은 수시로 공급량이 변동하는 재생 에너지에 유연하게 대처할 수 있다.

#### P2P 에너지 거래

블록체인을 통해 중앙화된 주체 없이 공급자ᆞ소비자ᆞ프로슈머 간 에너지 직거래가 가능하다. P2P(Peer-to-Peer) 에너지 거래 방식을 통해 사용자들은 합리적인 가격에 전기를 구매해 사용할 수 있고, 태양광 발전을 통해 에너지를 생산하는 프로슈머라면 남는 전기를 이웃에게 팔 수 있다. 또한 소규모 전력자원을 모아서 거래하고 현황, 실적을 체계적으로 관리하는 '전력 중개 사업' 등 신사업 파생을 지원한다.

본 시스템은 영지식증명으로부터 블록체인상 거래에서 내역이 공개됨으로써 야기되는 개인정보 유출 문제를 방지해 보다 안전한 서비스를 제공한다. 또한 유니스왑 프로토콜을 통해 시장 교란 행위를 방지하고 사용자 개입없이 자동으로 수요를 조정하는 자동화 수요반응자원(Automated Demand Response)을 달성한다.

PoA(Proof of Authority) 기반의 높은 TPS(Transaction Per Second)를 가지는 플라즈마 블록체인에서 거래가 이뤄지므로 지체없이 빠른 P2P 에너지 거래 서비스를 제공할 수 있다.

#### 서비스로서의 추론

본 시스템은 예측 모델로부터 전력 빅데이터 기반 신사업모델을 제시한다. 기존 데이터 제공에만 머무르던 수동적인 서비스에서 나아가, 실시간 예측을 제공하는 능동적인 서비스를 제공한다. 가령 소비자는 서비스로서의 '가격 예측 모델'을 통해 세탁기를 가장 싼 전기 요금 시간대에 맞춰 작동하고, 한낮에 에어컨 전력 사용을 조절하는 등의 자율적 에너지 사용이 가능하다. 공급자는 서비스로서의 '수요 예측 모델'을 통해 공급 예비율과 설비 예비율을 조정할 수 있다. 사업자는 서비스로서의 '전력 공급망 효율 계산 모델'을 통해 발전소 건설, 마이크로 그리드 구축 등을 행할 수 있다.

이러한 추론 모델들은 프라이버시를 지키면서도 인공 신경망을 학습시킬 수 있는 PPDL(Privacy-Preserving Deep Learning)에 기반해 제공되므로 데이터 프라이버시를 보장하면서도 높은 정확도의 모델을 형성한다.

#### 서비스로서의 스마트 그리드

궁극적으로 본 시스템은 실시간 전력망 통합관제 시스템, P2P 에너지 거래, 서비스로서의 추론으로부터 서비스로서의 스마트 그리드(SGaaS, Smart-Grid-as-a-Service)를 제공한다. 이는 전력망과 독립적인 마이크로 그리드 형성을 보조한다. 유니스왑을 통해 공급자-소비자 간 거래를 넘어 마이크로 그리드 간 자동화된 가치 교환, 전력 교환이 가능하다. 나아가 스마트 시티, V2X(Vehicle to Everything) 등 이종 사업부문에서 서비스로서의 스마트 그리드를 활용할 수 있다. 

## 🚩 기대효과
* 제안 SW개발을 실행하여 얻을 수 있는 기대효과에 대해 구체적으로 기술할 것 (A4 1 페이지 이내)

본 시스템이 제공하는 실시간 전력망 통합관제 시스템, P2P 에너지 거래, 서비스로서의 추론, 그리고 서비스로서의 스마트 그리드를 통해 다음과 같은 효과를 기대할 수 있다.

#### 블록체인 도입으로 얻는 기대효과

본 시스템은 에너지 거래에 블록체인 시스템을 도입해 다음과 같은 효과를 누린다[13].

* 경제성: 실시간 전력망에 기반해 소비자는 가장 값싼 전기를 탐색 구매할 수 있으며, 공급자는 잉여 전력 유지보수 비용을 절감할 수 있다. 또한 중간 거래 비용을 획기적으로 줄일 수 있다.

* 안정성: 블록체인은 본질적으로 분산 원장(ledger) 기술이므로, 공격자의 임의 변경이 사실상 불가능하다.

* 효율성: 현재 신재생 에너지 분야의 가장 큰 문제점은 전력 계통 부족으로 인한 병목현상이다. 이는 전력 계통 연결이 잘 되어있는 도심지역과 달리, 태양광 발전이 비교적 수월한 농촌 지역들은 전력 계통이 턱없이 부족하기에 발생하는 문제이다. 실제로 현재 국내에서는 태양광 발전을 통해 이미 발전된 전력도 전력 계통에 연계할 수가 없어 고객에게 팔지 못하고 있다[14]. 본 시스템은 실시간 전력망과 P2P 거래, '전력 공급망 효율 계산 모델' 등의 서비스로 재생 에너지 간헐성 문제를 해결해 효율을 증대시킨다.

#### 개인정보 보호 및 데이터 프라이버시 보장으로 얻는 기대효과

본 시스템의 거래는 zk-ERC20로 명명하는 익명화 토큰에 기반한다. 영지식증명 기술로 거래 참여자와 내역은 숨겨 거래를 완전히 익명화할 수 있다. 또한 본 시스템은 PPDL(Privacy-Preserving Deep Learning)을 적용해 종래의 스마트 전력 계량기 등으로부터 발생할 수 있는 데이터 프라이버시 문제를 해결한다. 이를 통해 공급자와 소비자 양 측의 프라이버시를 보장함으로써 개인정보 유출의 우려를 잠식, 마켓 참여의 장벽을 크게 낮춘다.

#### 서비스로서의 추론으로 얻는 기대효과

본 시스템에서 제공하는 서비스로서의 추론은 신사업모델 확산의 기반이 된다. 가령 소비량, 요금 등의 전력 사용 정보를 바탕으로 형성된 추론 모델에 프론트엔드(front-end)를 더해 웹, 모바일 등의 서비스를 빠르게 구축할 수 있다. 요금 비교 서비스, 수요 관리 서비스, 태양광 설치 컨설팅 등이 그 예시이다[11]. 분석된 정보가 소비자에게 실시간으로 전달돼야 진정한 스마트 그리드가 구현되기 때문에, 이러한 사업의 확산 및 보조는 매우 중요하다[15].

## 🚩 참고자료
* 제안 SW개발에 참고한 자료 또는 제안 아이디어의 실효성을 판단하는 데 도움이 될 수 있는 자료 등이 있을 경우 기술할 것

<!--
[1] Fang, Xi, et al. "Smart grid—The new and improved power grid: A survey." IEEE communications surveys & tutorials 14.4 (2011): 944-980.
[2] Feige, Uriel, Amos Fiat, and Adi Shamir. "Zero-knowledge proofs of identity." Journal of cryptology 1.2 (1988): 77-94.
[3] Shokri, Reza, and Vitaly Shmatikov. "Privacy-preserving deep learning." Proceedings of the 22nd ACM SIGSAC conference on computer and communications security. ACM, 2015.
[4] 스마트 그리드 시장 활성화 - http://www.bloter.net/archives/72049
[5] 해외 에너지 기술 회사 - https://www.mk.co.kr/news/economy/view/2018/06/384275/
[6] 한전 오픈 마이크로 그리드 – https://jnilbo.com/2019/01/22/2019012214534911773/
-->

[1] Fang, Xi, et al. "Smart grid—The new and improved power grid: A survey." IEEE communications surveys & tutorials 14.4 (2011): 944-980.

[2] 지능형전력망법 제2조 제2호

[3] KEPCO, https://home.kepco.co.kr/

[4] http://www.energy-news.co.kr/news/articleView.html?idxno=60328

[5] 영지식증명

[6] zk-ERC20

[7] uniswap

[8] PPDL

[9] 박재용, "스마트 그리드, 전력 효율관리인가 전력 민영화 출발인가”, http://www.newstof.com/news/articleView.html?idxno=1111

[10]  (주) 윕스 2014. 03 제주 스마트그리드 실증사업 성과평가 및 상호운용성 확산방안 도출 용역, 한국에너지기술평가원 pp. 9p. 

[11] 산업통상자원부, “제2차 지능형전력망 기본계획”. 2018.8.

[12] 에너지경제연구원, "블록체인, 에너지 부문 기회와 과제"

[13] 강두순, “英, 블록체인 기술로 에너지 직거래…현실이 된 `반값 전기료`”. https://www.mk.co.kr/news/economy/view/2018/06/384275/

[14] http://www.solartodaymag.com/news/articleView.html?idxno=6329

[15] http://www.bloter.net/archives/72049
